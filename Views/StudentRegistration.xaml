<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
              xmlns:viewmodel="clr-namespace:Kadam.ViewModels"
             x:Class="Kadam.Views.StudentRegistration"
                x:DataType="viewmodel:StudentRegistrationViewModel"
             Title="StudentRegistration"
             BackgroundColor="White">
    <Grid>
        <!-- Main Content -->
        <ScrollView IsEnabled="{Binding IsNotLoading}">
            <Grid RowSpacing="0" RowDefinitions="Auto,Auto,*">
                

                <!-- Tab strip - this is the highlighted area in red -->
                <Grid Grid.Row="1" BackgroundColor="#0098D1" Padding="0">
                    <HorizontalStackLayout Spacing="0" HorizontalOptions="Start">
                        <Button x:Name="PersonalTab" 
                            Text="Personal" 
                            BackgroundColor="#00AEEF" 
                            TextColor="White" 
                            FontSize="16" 
                            Padding="15,10" 
                            BorderWidth="0"
                            CornerRadius="0"
                             />

                            <Button x:Name="EducationTab" 
                                Text="Education" 
                                BackgroundColor="#0098D1" 
                                TextColor="White" 
                                FontSize="16" 
                                Padding="15,10" 
                                BorderWidth="0"
                                CornerRadius="0"
                                 />

                            <Button x:Name="FamilyTab" 
                                Text="Family" 
                                BackgroundColor="#0098D1" 
                                TextColor="White" 
                                FontSize="16" 
                                Padding="15,10" 
                                BorderWidth="0"
                                CornerRadius="0"
                                 />
                    </HorizontalStackLayout>
                </Grid>


                <!-- Main Content -->
                <ScrollView Grid.Row="2">
                    <VerticalStackLayout Padding="15" Spacing="15">

                        <Label Text="Student ID" 
                               FontSize="16" 
                               FontAttributes="Bold"
                               TextColor="Black"/>
                        <Border Padding="0" 
                                Stroke="LightGray" 
                                StrokeThickness="2">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Entry Text="{Binding Student.StudentId}"
                                   Margin="10,0"
                                   FontSize="15"/>
                        </Border>

                        <Label Text="First Name" 
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="Black"/>
                        <Border Padding="0" 
                                Stroke="LightGray" 
                                StrokeThickness="2">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Entry Text="{Binding Student.FirstName}"
                                   Margin="10,0"
                                   FontSize="15"/>
                        </Border>

                        <Label Text="Last Name" 
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="Black"/>
                        <Border Padding="0" 
                                Stroke="LightGray" 
                                StrokeThickness="2">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Entry Text="{Binding Student.LastName}"
                                   Margin="10,0"
                                   FontSize="15"/>
                        </Border>

                        <Label Text="Gender" 
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="Black"/>
                        <Border Padding="0" 
                                Stroke="LightGray" 
                                StrokeThickness="2">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Picker ItemsSource="{Binding GenderOptions}"
                                    SelectedItem="{Binding Student.Gender}"
                                    Margin="10,0"
                                    FontSize="15"/>
                        </Border>

                        <Label Text="Date of Birth" 
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="Black"/>
                        <Border Padding="0" 
                                Stroke="LightGray" 
                                StrokeThickness="2">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <DatePicker Date="{Binding Student.DateOfBirth}"
                                       Format="dd/MM/yyyy"
                                       Margin="10,0"
                                       FontSize="15"/>
                        </Border>

                        <Label Text="Do you have Aadhaar Card?" 
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="Black"/>
                        <Border Padding="10,5" 
                                Stroke="LightGray" 
                                StrokeThickness="2">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <HorizontalStackLayout Spacing="20">
                                <RadioButton Content="Yes" 
                                           IsChecked="{Binding Student.DoYouHaveAadhaarCard}"
                                           GroupName="AadhaarGroup"/>
                                <RadioButton Content="No" 
                                           GroupName="AadhaarGroup"/>
                            </HorizontalStackLayout>
                        </Border>

                        <Label Text="Aadhaar Card Number" 
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="Black"/>
                        <Border Padding="0" 
                                Stroke="LightGray" 
                                StrokeThickness="2">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Entry Text="{Binding Student.AadhaarCardNumber}"
                                   Margin="10,0"
                                   FontSize="15"/>
                        </Border>

                        <Label Text="Institution" 
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="Black"/>
                        <Border Padding="0" 
                                Stroke="LightGray" 
                                StrokeThickness="2">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Picker ItemsSource="{Binding Institutions}"
                                    ItemDisplayBinding="{Binding InstitutionName}"
                                    SelectedItem="{Binding SelectedInstitution, Mode=TwoWay}"
                                    Margin="10,0"
                                    FontSize="15"/>
                        </Border>

                        <Label Text="Grade" 
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="Black"/>
                        <Border Padding="0" 
                                Stroke="LightGray" 
                                StrokeThickness="2">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Picker ItemsSource="{Binding Grades}"
                                    ItemDisplayBinding="{Binding GradeName}"
                                    SelectedItem="{Binding SelectedGrade, Mode=TwoWay}"
                                    Margin="10,0"
                                    FontSize="15"/>
                        </Border>

                        <!-- Add Section Picker after Grade -->
                        <Label Text="Section" 
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="Black"/>
                        <Border Padding="0" 
                                Stroke="LightGray" 
                                StrokeThickness="2">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Picker ItemsSource="{Binding Sections}"
                                    SelectedItem="{Binding Student.Section}"
                                    Margin="10,0"
                                    FontSize="15"/>
                        </Border>

                        <Label Text="Student Registration Number" 
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="Black"/>
                        <Border Padding="0" 
                                Stroke="LightGray" 
                                StrokeThickness="2">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Entry Text="{Binding Student.StudentRegistratioNumber}"
                                   Margin="10,0"
                                   FontSize="15"/>
                        </Border>

                        <Label Text="Child Status before Kadam STC" 
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="Black"/>
                        <Border Padding="0" 
                                Stroke="LightGray" 
                                StrokeThickness="2">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Picker ItemsSource="{Binding ChildStatusOptions}"
                                    SelectedIndex="{Binding Student.ChildStatudBeforeKadamSTC}"
                                    Margin="10,0"
                                    FontSize="15"/>
                        </Border>

                        <Label Text="How long are you planning to stay?" 
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="Black"/>
                        <Border Padding="0" 
                                Stroke="LightGray" 
                                StrokeThickness="2">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Picker ItemsSource="{Binding StayDurationOptions}"
                                    SelectedIndex="{Binding Student.HowLongPlaningToStayThisArea}"
                                    Margin="10,0"
                                    FontSize="15"/>
                        </Border>

                        <Label Text="Class" 
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="Black"/>
                        <Border Padding="0" 
                                Stroke="LightGray" 
                                StrokeThickness="2">
                            <Border.StrokeShape>
                                <RoundRectangle CornerRadius="10"/>
                            </Border.StrokeShape>
                            <Entry Text="{Binding Student.Class}"
                                   Margin="10,0"
                                   FontSize="15"/>
                        </Border>

                        <!-- Action Buttons -->
                        <HorizontalStackLayout Spacing="10" 
                                             HorizontalOptions="Center"
                                             Margin="0,20,0,30">
                            <Button Text="SAVE"
                                    Command="{Binding SaveCommand}"
                                    BackgroundColor="#00BCD4"
                                    TextColor="White"
                                    WidthRequest="120"
                                    HeightRequest="45"
                                    FontSize="18"/>
                            <Button Text="CANCEL"
                                    Command="{Binding CancelCommand}"
                                    BackgroundColor="#E0E0E0"
                                    TextColor="Black"
                                    WidthRequest="120"
                                    HeightRequest="45"
                                    FontSize="18"/>
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </ScrollView>
            </Grid>
        </ScrollView>

        <!-- Loading Overlay -->
        <Grid IsVisible="{Binding IsLoading}"
              BackgroundColor="#80000000"
              ZIndex="1">
            <VerticalStackLayout HorizontalOptions="Center" 
                               VerticalOptions="Center">
                <ActivityIndicator IsRunning="{Binding IsLoading}"
                                 Color="#00BCD4"
                                 HeightRequest="50"
                                 WidthRequest="50"/>
                <Label Text="Loading..."
                       TextColor="White"
                       HorizontalOptions="Center"
                       Margin="0,10,0,0"/>
            </VerticalStackLayout>
        </Grid>
    </Grid>
</ContentPage>